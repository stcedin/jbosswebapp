<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<link href="css/basic.css" type="text/css" rel="stylesheet">
<title>Insert title here</title>

<script src="script/jquery-3.1.1.min.js"></script>
<script>

  var title = '';
  function getRandom(form) {  
	     var root = "https://jsonplaceholder.typicode.com";
	     var seed = form.seed.value;

         $.ajax({
             type : "GET",
             dataType : "text",
                async : true,
                url : root + '/photos/' + seed,
         
                error : function(request, status, error) {
                    $("p.result").html("Failed to invoke directions rest service: " + error);
                },
                success : function(data) {
                    var object = JSON.parse(data);
                    title = object.title;
                    var image = object.url;
                    $("p.source").html(title);
                    $("p.translation").html('');
                    //var imgsrc = "<img src=\"" + image + "\"/>";
                    //$("p.body").html(imgsrc);
                }
         });
  }

  
  function getTranslation(form) {
	     var sourceLang = "auto";
	     var targetLang = "en";
	     var sourceText = $("p.source").text();

	     var urlTrans = "https://translate.googleapis.com/translate_a/single?client=gtx&sl=" 
	            + sourceLang + "&tl=" + targetLang + "&dt=t&q=" + encodeURI(sourceText);

         $.ajax({
             type : "GET",
             dataType : "text",
                async : true,
                url : urlTrans,
                error : function(request, status, error) {
                    $("p.result").html("Failed to invoke directionsXXX rest service: " + error);
                },
                success : function(data) {
					<!-- https://ctrlq.org/code/19909-google-translate-api -->
					var idxStart = data.indexOf('"');	
				  	var idxEnd = data.indexOf('"', idxStart+1);
	        		var translatedText = data.substring(idxStart+1, idxEnd);
	        		$("p.translation").html(translatedText);
                }
         });
    }

    $(document).ready(function() {
    });

    

  </script>


</head>
<body>
	<p>This page uses a rest service to generate some random non english expressions from a 
	publicly available rest service, provided for learning purposes.  The text returned is
	then fired through google translate to determing the English</p>
	<p>
		<form name="generate">
			<label>Select a random seeding:</label><br>
			<input type="number" name="seed" min="1" max="50" id="seed"><br>
			<input type="button" value="Generate Expression" id="generate" onClick="getRandom(this.form)">
		</form>
	<p>
	 
	<p class="source"></p>

	<p>
		<form name="translate">
			<input type="button" value="Translate" id="translate" onClick="getTranslation()">
		</form>
	<p>

	<p class="translation"></p>
</body>
</html>